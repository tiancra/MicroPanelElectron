import{r as M,a as Q}from"./index-0c0d10c8.js";import{S as V}from"./single-71ef3997.js";import{a as R,q as m,B as j,r as n,o as u,h as _,w as i,b as w,i as r,y as z,c as g,F as C,g as B,e as T,ag as y,_ as G}from"./index-1781b57c.js";const L={style:{width:"100%",display:"flex","justify-content":"space-between"}},P={key:0},$={key:1},H={style:{"margin-bottom":"10px",display:"flex"}},K=R({__name:"index",setup(W){const N=m([{title:"Bot",name:"bot"},{title:"群组",name:"group"},{title:"通知",name:"notice"},{title:"其它",name:"other"},{title:"截图工具",name:"puppeteer"},{title:"QQ",name:"qq"},{title:"Redis",name:"redis"},{title:"渲染器",name:"renderer"}]),o=m({title:"Bot",name:"bot"}),f=m(),p=m("default"),d=m(""),s=m([]);let S=1;const k=async l=>{o.value.name=l;let e=await M(l);if(e.code==200)if(l=="group"){s.value=[];for(let t in e.data)s.value.push({title:t,name:t,content:e.data[t]})}else f.value=e.data},h=()=>{if(!d.value){y.error("请输入群号！");return}if(s.value.find(t=>t.name==d.value)){y.error("该群已存在！");return}const l=`${++S}`;let e=s.value.find(t=>t.name=="default");s.value.push({title:d.value,name:d.value,content:JSON.parse(JSON.stringify(e==null?void 0:e.content))}),p.value=l},U=l=>{const e=s.value;if(l=="default"){y.error("默认配置不能删除！");return}let t=p.value;t===l&&e.forEach((c,v)=>{if(c.name===l){const b=e[v+1]||e[v-1];b&&(t=b.name)}}),p.value=t,s.value=e.filter(c=>c.name!==l)},q=async()=>{let l;o.value.name=="group"?l=s.value.reduce((t,c)=>(t[c.name]=c.content,t),{}):l=f.value,console.log(o.value.name),(await Q(o.value.name,l)).code==200&&y.success("保存成功！")};return j(()=>{k("bot")}),(l,e)=>{const t=n("el-button"),c=n("el-tooltip"),v=n("el-option"),b=n("el-select"),E=n("el-divider"),F=n("el-input"),O=n("Avatar"),A=n("el-icon"),D=n("el-tab-pane"),I=n("el-tabs"),J=n("el-card");return u(),_(J,null,{default:i(()=>[w("div",L,[r(c,{class:"box-item",effect:"dark",content:"注意只保存当前标签配置，切换标签会刷新配置",placement:"bottom"},{default:i(()=>[r(t,{type:"primary",onClick:q},{default:i(()=>[...e[4]||(e[4]=[z("保存配置",-1)])]),_:1})]),_:1}),r(b,{modelValue:o.value.title,"onUpdate:modelValue":e[0]||(e[0]=a=>o.value.title=a),placeholder:"Select",style:{width:"100px"},onChange:k},{default:i(()=>[(u(!0),g(C,null,B(N.value,(a,x)=>(u(),_(v,{key:x,label:a.title,value:a.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),r(E),o.value.name!="group"?(u(),g("div",P,[r(V,{cfg:f.value,"onUpdate:cfg":e[1]||(e[1]=a=>f.value=a)},null,8,["cfg"])])):(u(),g("div",$,[w("div",H,[o.value.name=="group"?(u(),_(F,{key:0,modelValue:d.value,"onUpdate:modelValue":e[2]||(e[2]=a=>d.value=a),style:{width:"100%","margin-left":"5px"}},null,8,["modelValue"])):T("",!0),o.value.name=="group"?(u(),_(t,{key:1,onClick:h,icon:"Plus",style:{"margin-left":"5px"}},{default:i(()=>[r(A,null,{default:i(()=>[r(O)]),_:1})]),_:1})):T("",!0)]),r(I,{modelValue:p.value,"onUpdate:modelValue":e[3]||(e[3]=a=>p.value=a),type:"card",class:"demo-tabs",closable:"",onTabRemove:U},{default:i(()=>[(u(!0),g(C,null,B(s.value,a=>(u(),_(D,{lazy:!1,key:a.name,label:a.title,name:a.name},{default:i(()=>[r(V,{cfg:a.content,"onUpdate:cfg":x=>a.content=x},null,8,["cfg","onUpdate:cfg"])]),_:2},1032,["label","name"]))),128))]),_:1},8,["modelValue"])]))]),_:1})}}});const ee=G(K,[["__scopeId","data-v-98fe7de4"]]);export{ee as default};
